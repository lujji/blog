<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>lujji</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="embedded stuff">
<meta property="og:type" content="website">
<meta property="og:title" content="lujji">
<meta property="og:url" content="http://lujji.github.io/blog/index.html">
<meta property="og:site_name" content="lujji">
<meta property="og:description" content="embedded stuff">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="lujji">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="atom.xml" title="lujji" type="application/atom+xml">
  
  
    <link rel="icon" href="/blog/css/images/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/blog/css/style.css">

  

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">lujji</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">embedded stuff</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
      <a id="nav-github-link" class="nav-icon" target="_blank" rel="noopener" href="https://github.com/lujji" title="GitHub"></a>
        
          <a id="nav-rss-link" class="nav-icon" href="atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//duckduckgo.com" method="get" accept-charset="UTF-8" onsubmit="var qstr = document.getElementById('searchBox'); qstr.value += ' site:http://lujji.github.io/blog'" class="search-form"><input id="searchBox" type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-power-analysis-with-ds1000z" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/power-analysis-with-ds1000z/" class="article-date">
  <time datetime="2023-02-14T10:54:42.000Z" itemprop="datePublished">2023-02-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/power-analysis-with-ds1000z/">Power analysis with Rigol DS1000Z</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Recently, I had to analyze the power profile of a microcontroller at a specific point in time. This article will cover the required steps to perform such measurements with Rigol DS1054Z&#x2F;1104Z oscilloscope.</p>
        
          <p class="article-more-link">
            <a href="/blog/power-analysis-with-ds1000z/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/power-analysis-with-ds1000z/" data-id="cle467ssi0008axcxflra3876" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/power-analysis-with-ds1000z/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/digital-signal-processing/" rel="tag">digital-signal-processing</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/rigol/" rel="tag">rigol</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/side-channel-attack/" rel="tag">side-channel-attack</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-serial-bootloader-for-stm8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/serial-bootloader-for-stm8/" class="article-date">
  <time datetime="2017-08-07T21:00:00.000Z" itemprop="datePublished">2017-08-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/serial-bootloader-for-stm8/">Serial bootloader for STM8</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article will cover developing a serial bootloader for STM8S microcontrollers.</p>
        
          <p class="article-more-link">
            <a href="/blog/serial-bootloader-for-stm8/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/serial-bootloader-for-stm8/" data-id="cle467sss000daxcxhyznaxt1" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/serial-bootloader-for-stm8/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/bootloader/" rel="tag">bootloader</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/sdcc/" rel="tag">sdcc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/stm8/" rel="tag">stm8</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/tutorial/" rel="tag">tutorial</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-mixing-c-and-assembly-on-stm8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/mixing-c-and-assembly-on-stm8/" class="article-date">
  <time datetime="2017-07-31T21:00:00.000Z" itemprop="datePublished">2017-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/mixing-c-and-assembly-on-stm8/">Mixing C and assembly on STM8</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This guide discusses how we should (and should not) speed up our code with inline assembly and explains how to write separate assembly routines that can be used within C.</p>
        
          <p class="article-more-link">
            <a href="/blog/mixing-c-and-assembly-on-stm8/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/mixing-c-and-assembly-on-stm8/" data-id="cle467ssh0007axcx126i0vb5" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/mixing-c-and-assembly-on-stm8/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/assembly/" rel="tag">assembly</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/sdcc/" rel="tag">sdcc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/stm8/" rel="tag">stm8</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-executing-code-from-ram-on-stm8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/executing-code-from-ram-on-stm8/" class="article-date">
  <time datetime="2017-07-25T21:00:00.000Z" itemprop="datePublished">2017-07-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/executing-code-from-ram-on-stm8/">Executing code from RAM on STM8</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>A short article where we investigate how executing code from RAM can be achieved on STM8 with SDCC toolchain.</p>
        
          <p class="article-more-link">
            <a href="/blog/executing-code-from-ram-on-stm8/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/executing-code-from-ram-on-stm8/" data-id="cle467ssd0004axcxft5b0qpx" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/executing-code-from-ram-on-stm8/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/assembly/" rel="tag">assembly</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/sdcc/" rel="tag">sdcc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/stm8/" rel="tag">stm8</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bare-metal-programming-stm8-part2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/bare-metal-programming-stm8-part2/" class="article-date">
  <time datetime="2017-04-10T21:00:00.000Z" itemprop="datePublished">2017-04-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/bare-metal-programming-stm8-part2/">Bare metal programming: STM8 (Part 2)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In this part we are going to focus on more features of STM8 (clock, EEPROM, option bytes, flash access) and stick some wires into the mains outlet.</p>
        
          <p class="article-more-link">
            <a href="/blog/bare-metal-programming-stm8-part2/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/bare-metal-programming-stm8-part2/" data-id="cle467sry0000axcxau9ncaw9" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/bare-metal-programming-stm8-part2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/bare-metal/" rel="tag">bare-metal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/sdcc/" rel="tag">sdcc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/stm8/" rel="tag">stm8</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-bare-metal-programming-stm8" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/bare-metal-programming-stm8/" class="article-date">
  <time datetime="2017-03-03T22:00:00.000Z" itemprop="datePublished">2017-03-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/bare-metal-programming-stm8/">Bare metal programming: STM8</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article will cover developing for STM8 series of microcontrolles completely from scratch, without using any vendor-supplied libraries.</p>
        
          <p class="article-more-link">
            <a href="/blog/bare-metal-programming-stm8/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/bare-metal-programming-stm8/" data-id="cle467ss60001axcx6o1t8lfz" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/bare-metal-programming-stm8/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/bare-metal/" rel="tag">bare-metal</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/sdcc/" rel="tag">sdcc</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/stm8/" rel="tag">stm8</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-installing-blackmagic-via-stlink-bootloader" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/installing-blackmagic-via-stlink-bootloader/" class="article-date">
  <time datetime="2017-02-15T22:30:54.000Z" itemprop="datePublished">2017-02-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/installing-blackmagic-via-stlink-bootloader/">Installing Black Magic via ST-Link bootloader</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ST-Link hardware has become a host for various debuggers, including J-Link and Versaloon (which no longer seems to be maintained). To be honest, I was so spoiled by J-Link that I never had the necessity to try different debugging hardware. Only recently I have discovered the <a target="_blank" rel="noopener" href="https://github.com/blacksphere/blackmagic">Black Magic Probe</a> which, according to Hackaday, is the <a target="_blank" rel="noopener" href="http://hackaday.com/2016/12/02/black-magic-probe-the-best-arm-jtag-debugger">best ARM JTAG debugger</a>.</p>
        
          <p class="article-more-link">
            <a href="/blog/installing-blackmagic-via-stlink-bootloader/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/installing-blackmagic-via-stlink-bootloader/" data-id="cle467ssf0005axcx19jw1jy9" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/installing-blackmagic-via-stlink-bootloader/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/blackmagic/" rel="tag">blackmagic</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/java-bytecode/" rel="tag">java-bytecode</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/reverse-engineering/" rel="tag">reverse-engineering</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/st-link/" rel="tag">st-link</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-esp-httpd" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/esp-httpd/" class="article-date">
  <time datetime="2017-01-30T18:11:00.000Z" itemprop="datePublished">2017-01-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/esp-httpd/">HTTP server with WebSockets on ESP8266</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This article will cover implementing a basic HTTP server on top of LwIP for ESP8266 and dive into the implementation of WebSockets.</p>
        
          <p class="article-more-link">
            <a href="/blog/esp-httpd/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/esp-httpd/" data-id="cle467ssc0003axcx5dvpf6kl" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/esp-httpd/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/esp8266/" rel="tag">esp8266</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/freertos/" rel="tag">freertos</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/web/" rel="tag">web</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-reverse-engineering-stlink-firmware-part2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/reverse-engineering-stlink-firmware-part2/" class="article-date">
  <time datetime="2016-10-16T21:00:00.000Z" itemprop="datePublished">2016-10-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/reverse-engineering-stlink-firmware-part2/">Reverse-engineering ST-Link firmware - Part 2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is the second part of ST-Link reverse-engineering, where I cover dumping the firmware, extracting and reverse-engineering the bootloader, and finally, patching the bootloader in order to disable Level 1 protection.</p>
        
          <p class="article-more-link">
            <a href="/blog/reverse-engineering-stlink-firmware-part2/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/reverse-engineering-stlink-firmware-part2/" data-id="cle467ssm000aaxcx1k9382nw" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/reverse-engineering-stlink-firmware-part2/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/reverse-engineering/" rel="tag">reverse-engineering</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/st-link/" rel="tag">st-link</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/stm32/" rel="tag">stm32</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-reverse-engineering-stlink-firmware" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/reverse-engineering-stlink-firmware/" class="article-date">
  <time datetime="2016-10-12T22:11:48.000Z" itemprop="datePublished">2016-10-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/reverse-engineering-stlink-firmware/">Reverse-engineering ST-Link firmware</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>This is the first part of ST-Link reverse-engineering, where I cover analyzing and decompiling the updater utility, decrypting and encrypting firmware binaries and running custom code on ST-Link v2&#x2F;2-1 programmer.</p>
        
          <p class="article-more-link">
            <a href="/blog/reverse-engineering-stlink-firmware/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://lujji.github.io/blog/reverse-engineering-stlink-firmware/" data-id="cle467sso000baxcxfyzrgkah" class="article-share-link">Share</a>
      
        <a href="http://lujji.github.io/blog/reverse-engineering-stlink-firmware/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/reverse-engineering/" rel="tag">reverse-engineering</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/st-link/" rel="tag">st-link</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/stm32/" rel="tag">stm32</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/blog/page/2/">2</a><a class="extend next" rel="next" href="/blog/page/2/">Next</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/power-analysis-with-ds1000z/">Power analysis with Rigol DS1000Z</a>
          </li>
        
          <li>
            <a href="/blog/serial-bootloader-for-stm8/">Serial bootloader for STM8</a>
          </li>
        
          <li>
            <a href="/blog/mixing-c-and-assembly-on-stm8/">Mixing C and assembly on STM8</a>
          </li>
        
          <li>
            <a href="/blog/executing-code-from-ram-on-stm8/">Executing code from RAM on STM8</a>
          </li>
        
          <li>
            <a href="/blog/bare-metal-programming-stm8-part2/">Bare metal programming: STM8 (Part 2)</a>
          </li>
        
          <li>
            <a href="/blog/bare-metal-programming-stm8/">Bare metal programming: STM8</a>
          </li>
        
          <li>
            <a href="/blog/installing-blackmagic-via-stlink-bootloader/">Installing Black Magic via ST-Link bootloader</a>
          </li>
        
          <li>
            <a href="/blog/esp-httpd/">HTTP server with WebSockets on ESP8266</a>
          </li>
        
          <li>
            <a href="/blog/reverse-engineering-stlink-firmware-part2/">Reverse-engineering ST-Link firmware - Part 2</a>
          </li>
        
          <li>
            <a href="/blog/reverse-engineering-stlink-firmware/">Reverse-engineering ST-Link firmware</a>
          </li>
        
          <li>
            <a href="/blog/stlink-clone-trace/">Adding Trace support to ST-Link clones</a>
          </li>
        
      </ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2023 lujji<br>      
      lujji at protonmail com
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'lujji';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.css">

  
<script src="/blog/fancybox/jquery.fancybox.pack.js"></script>




<script src="/blog/js/script.js"></script>


  </div>
</body>
</html>